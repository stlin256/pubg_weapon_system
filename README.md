# PUBG æ­¦å™¨ç®¡ç†ä¸å£°éŸ³è¯†åˆ«ç»¼åˆç³»ç»Ÿ

æœ¬é¡¹ç›®æ˜¯ä¸€ä¸ªé›†æˆçš„è¯¾ç¨‹è®¾è®¡å®è·µï¼Œå·§å¦™åœ°èåˆäº†ä¸¤ä¸ªæ ¸å¿ƒæ¨¡å—ï¼šä¸€ä¸ªåŠŸèƒ½å®Œå¤‡çš„ **Web æ­¦å™¨ç®¡ç†ç³»ç»Ÿ** å’Œä¸€ä¸ªé«˜æ€§èƒ½çš„ **æ­¦å™¨å£°éŸ³è¯†åˆ«æœºå™¨å­¦ä¹ æµæ°´çº¿**ã€‚é¡¹ç›®ä¸ä»…æ¶µç›–äº†ä»åç«¯å¼€å‘ã€å‰ç«¯äº¤äº’åˆ°æ•°æ®åŠ å¯†çš„å…¨æ ˆæŠ€æœ¯ï¼Œè¿˜æ·±å…¥æ¢ç´¢äº†ä»ä¼ ç»Ÿæœºå™¨å­¦ä¹ åˆ°å‰æ²¿æ·±åº¦å­¦ä¹ æ¨¡å‹çš„æ„å»ºã€è®­ç»ƒä¸è¯„ä¼°ã€‚

---

## ğŸš€ æ ¸å¿ƒåŠŸèƒ½äº®ç‚¹

### æ­¦å™¨ç®¡ç†ç³»ç»Ÿ
*   **ä¼ä¸šçº§ Web æ¶æ„**: é‡‡ç”¨ Flask åº”ç”¨å·¥å‚æ¨¡å¼ï¼Œå®ç°é«˜åº¦æ¨¡å—åŒ–ä¸å¯æ‰©å±•æ€§ã€‚
*   **å…¨åŠŸèƒ½æ­¦å™¨åº“**: æä¾›å¯¹æ­¦å™¨æ•°æ®çš„å¢ã€åˆ ã€æ”¹ã€æŸ¥ (CRUD) RESTful APIã€‚
*   **åšå›ºçš„å®‰å…¨æœºåˆ¶**: ç”¨æˆ·åã€å¯†ç å’Œæ­¦å™¨åº“æ•°æ®å‡é‡‡ç”¨ AES (GCM æ¨¡å¼) **å…¨åŠ å¯†**å­˜å‚¨ï¼Œç¡®ä¿æ•°æ®å®‰å…¨ã€‚
*   **ç°ä»£åŒ–å‰ç«¯ä½“éªŒ**:
    *   æ”¯æŒä¸­/è‹±æ–‡åŒè¯­åˆ‡æ¢ã€‚
    *   å“åº”å¼å¸ƒå±€ï¼Œé€‚é…æ¡Œé¢ä¸ç§»åŠ¨ç«¯ã€‚
    *   åŒ…å«æ•°æ®æ’åºã€æ ‡ç­¾é€‰æ‹©å™¨ã€è‡ªå®šä¹‰æ¨¡æ€æ¡†ç­‰é«˜çº§äº¤äº’åŠŸèƒ½ã€‚

### æ­¦å™¨å£°éŸ³è¯†åˆ«ç³»ç»Ÿ
*   **é«˜ç²¾åº¦å¤šç»´è¯†åˆ«**: èƒ½ä»éŸ³é¢‘ä¸­å‡†ç¡®è¯†åˆ«**æ­¦å™¨ç±»å‹**ã€**å¼€ç«è·ç¦»**å’Œ**å£°æºæ–¹å‘**ã€‚
*   **å‰æ²¿æ¨¡å‹åº”ç”¨**: ç³»ç»Ÿæ€§åœ°è¯„ä¼°äº†å¤šç§ä¼ ç»Ÿæ¨¡å‹ï¼Œå¹¶åˆ›æ–°æ€§åœ°å¾®è°ƒäº†ä¸¤ç§å…ˆè¿›çš„ Transformer æ¨¡å‹ (AST å’Œ PaSST)ã€‚
*   **çªç ´æ€§æˆæœ**:
    *   ç»è¿‡**åŒå£°é“æ”¹é€ **çš„ PaSST æ¨¡å‹åœ¨æ‰€æœ‰ä»»åŠ¡ä¸­å‡è¡¨ç°æœ€ä½³ã€‚
    *   å°¤å…¶åœ¨æœ€å…·æŒ‘æˆ˜çš„**æ–¹å‘è¯†åˆ«**ä»»åŠ¡ä¸Šï¼ŒPaSST æ¨¡å‹å‡†ç¡®ç‡é«˜è¾¾ **91.6%**ï¼Œæ˜¾è‘—è¶…è¶Šå…¶ä»–æ‰€æœ‰æ¨¡å‹ã€‚
*   **æ¨¡å—åŒ–ç§‘å­¦æµç¨‹**: å®ç°äº†ä»æ•°æ®å¤„ç†ã€ç‰¹å¾å·¥ç¨‹åˆ°æ¨¡å‹è®­ç»ƒã€æ‰¹é‡è¯„ä¼°å’Œç»“æœå¯è§†åŒ–çš„å®Œæ•´ã€å¯å¤ç°æµæ°´çº¿ã€‚

---

## ğŸ“Š æœ€ç»ˆæˆæœå±•ç¤º

### æ­¦å™¨å£°éŸ³è¯†åˆ«æ¨¡å‹æ€§èƒ½æ€»è§ˆ
ä¸‹å›¾æ¸…æ™°åœ°å±•ç¤ºäº†ï¼Œåœ¨æ‰€æœ‰ä¸‰ä¸ªè¯†åˆ«ä»»åŠ¡ä¸­ï¼Œæˆ‘ä»¬æ‰€é‡‡ç”¨çš„ Transformer æ¨¡å‹ï¼ˆå°¤å…¶æ˜¯ç»è¿‡åŒå£°é“æ”¹é€ çš„ PaSSTï¼‰æ€§èƒ½è¿œè¶…æ‰€æœ‰ä¼ ç»Ÿæœºå™¨å­¦ä¹ åŸºçº¿æ¨¡å‹ã€‚

![æ¨¡å‹æ€»å‡†ç¡®ç‡å¯¹æ¯”](reports/figures/overall_accuracy_grouped_zh.png)

### æ­¦å™¨ç®¡ç†ç³»ç»Ÿç•Œé¢
![æ­¦å™¨ç®¡ç†ç³»ç»Ÿæˆªå›¾](webpage.jpeg)


---

## ğŸ› ï¸ ç¯å¢ƒè®¾ç½®

é¡¹ç›®ä¾èµ– Python 3.10+ ç¯å¢ƒã€‚æ¨èä½¿ç”¨ Conda åˆ›å»ºç‹¬ç«‹çš„è™šæ‹Ÿç¯å¢ƒä»¥ä¿è¯ç¯å¢ƒçº¯å‡€ã€‚

1.  **åˆ›å»ºå¹¶æ¿€æ´» Conda ç¯å¢ƒ**:
    ```bash
    conda create -n pubg_system python=3.10
    conda activate pubg_system
    ```

2.  **å®‰è£…ä¾èµ–**:
    é¡¹ç›®çš„æ‰€æœ‰ä¾èµ–é¡¹éƒ½å·²æ•´åˆåˆ° `requirements.txt` æ–‡ä»¶ä¸­ã€‚è¯·è¿è¡Œä»¥ä¸‹å‘½ä»¤è¿›è¡Œå®‰è£…ï¼š
    ```bash
    pip install -r requirements.txt
    ```
    > **æ³¨æ„**: å£°éŸ³è¯†åˆ«ç³»ç»Ÿä¸ºäº†ä½¿ç”¨ CUDA åŠ é€Ÿï¼Œè¯·ç¡®ä¿æ‚¨å·²æ­£ç¡®å®‰è£… NVIDIA é©±åŠ¨å’Œ CUDA Toolkitï¼Œå¹¶å»ºè®®å®‰è£… PyTorch çš„ CUDA ç‰ˆæœ¬ã€‚

---

## æ¨¡å—ä¸€ï¼šğŸ”« Web æ­¦å™¨ç®¡ç†ç³»ç»Ÿ

### ç®€ä»‹
è¿™æ˜¯ä¸€ä¸ªåŸºäº Flask çš„ Web åº”ç”¨ï¼Œä¸ºç”¨æˆ·æä¾›äº†ä¸€ä¸ªå®‰å…¨ã€ç¾è§‚çš„ç•Œé¢æ¥ç®¡ç†ä»–ä»¬çš„æ­¦å™¨åº“ã€‚

### â–¶ï¸ å¦‚ä½•è¿è¡Œ

1.  **ç¡®ä¿ä¾èµ–å·²å®‰è£…**: `pip install -r requirements.txt`
2.  **å¯åŠ¨æœåŠ¡**: åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹è¿è¡Œï¼š
    ```bash
    python3 run.py
    ```
3.  **è®¿é—®åº”ç”¨**: æ‰“å¼€æµè§ˆå™¨å¹¶è®¿é—® `http://127.0.0.1:5000/`ã€‚æ‚¨å¯ä»¥æ³¨å†Œæ–°ç”¨æˆ·æˆ–ä½¿ç”¨å·²æœ‰ç”¨æˆ·ç™»å½•ã€‚

---

## æ¨¡å—äºŒï¼šğŸ”Š æ­¦å™¨å£°éŸ³è¯†åˆ«ç³»ç»Ÿ

### ç®€ä»‹
è¿™æ˜¯ä¸€ä¸ªæ¨¡å—åŒ–çš„æœºå™¨å­¦ä¹ æµæ°´çº¿ï¼Œç”¨äºä»éŸ³é¢‘æ•°æ®ä¸­è®­ç»ƒã€è¯„ä¼°å¹¶é€‰å‡ºæœ€ä¼˜æ¨¡å‹ï¼Œä»¥è¯†åˆ«æ­¦å™¨çš„ç±»å‹ã€è·ç¦»å’Œæ–¹å‘ã€‚

### â–¶ï¸ å¦‚ä½•è¿è¡Œ

æ•´ä¸ªæµç¨‹åˆ†ä¸ºä¸‰æ­¥ï¼Œè¯·åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹æŒ‰é¡ºåºæ‰§è¡Œã€‚

**ç¬¬ä¸€æ­¥: ç‰¹å¾æå– (ä»…ä¼ ç»Ÿæ¨¡å‹éœ€è¦)**

æ­¤å‘½ä»¤ä¼šå¤„ç† `sounds/` ç›®å½•ä¸‹çš„æ‰€æœ‰éŸ³é¢‘ï¼Œæå– MFCC ç‰¹å¾ï¼Œä¸ºåç»­ä¼ ç»Ÿæ¨¡å‹è®­ç»ƒåšå‡†å¤‡ã€‚
```bash
python -m src.sound_recognition.feature_extractor
```

**ç¬¬äºŒæ­¥: æ¨¡å‹è®­ç»ƒ**

æ‚¨å¯ä»¥é€‰æ‹©æ€§åœ°è®­ç»ƒå•ä¸ªæˆ–å¤šä¸ªæ¨¡å‹ã€‚ä»¥ä¸‹ä¸ºå‡ ä¸ªç¤ºä¾‹ï¼š

```bash
# ç¤ºä¾‹ 1: è®­ç»ƒä¸€ä¸ª RandomForest æ¨¡å‹æ¥é¢„æµ‹ weapon
python -m src.sound_recognition.train --model RandomForest --target weapon

# ç¤ºä¾‹ 2: è®­ç»ƒä¸€ä¸ª XGBoost æ¨¡å‹æ¥é¢„æµ‹ distance (ä½¿ç”¨ CUDA)
python -m src.sound_recognition.train --model XGBoost --target distance --use_cuda

# ç¤ºä¾‹ 3: å¾®è°ƒ AST æ¨¡å‹æ¥é¢„æµ‹ weapon (è®­ç»ƒ 10 ä¸ª epoch)
python -m src.sound_recognition.train_ast --target weapon --epochs 10

# ç¤ºä¾‹ 4: å¾®è°ƒæˆ‘ä»¬æ”¹é€ åçš„åŒå£°é“ PaSST æ¨¡å‹æ¥é¢„æµ‹ direction
python -m src.sound_recognition.train_passt --target direction --epochs 10
```
> æˆ‘ä»¬æä¾›äº†ä¸€ä¸ªæ–¹ä¾¿çš„æ‰¹é‡è®­ç»ƒè„šæœ¬ `all_train_and_eval.sh`ï¼Œå®ƒä¼šè®­ç»ƒæ‰€æœ‰é¢„è®¾çš„æ¨¡å‹ã€‚æ‚¨å¯ä»¥ç›´æ¥è¿è¡Œ `bash all_train_and_eval.sh`ã€‚


**ç¬¬ä¸‰æ­¥: ç»¼åˆè¯„ä¼°**

å½“æ‚¨è®­ç»ƒå®Œæ‰€æœ‰å¸Œæœ›å¯¹æ¯”çš„æ¨¡å‹åï¼Œè¿è¡Œæ­¤è„šæœ¬ã€‚å®ƒä¼šè‡ªåŠ¨è¯„ä¼°æ‰€æœ‰å·²ä¿å­˜çš„æ¨¡å‹ï¼Œå¹¶ç”Ÿæˆæœ€ç»ˆçš„æ€§èƒ½æŠ¥å‘Š `reports/evaluation_results.csv` å’Œå¯¹æ¯”å›¾ã€‚
```bash
python -m src.sound_recognition.evaluate
```

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
.
â”œâ”€â”€ app/                  # Webåº”ç”¨æ ¸å¿ƒåŒ… (æ­¦å™¨ç®¡ç†ç³»ç»Ÿ)
â”‚   â”œâ”€â”€ templates/        # HTML æ¨¡æ¿
â”‚   â”œâ”€â”€ __init__.py       # åº”ç”¨å·¥å‚ create_app()
â”‚   â”œâ”€â”€ routes.py         # è·¯ç”±ä¸è§†å›¾
â”‚   â””â”€â”€ services.py       # æ ¸å¿ƒä¸šåŠ¡é€»è¾‘
â”œâ”€â”€ data/                 # æŒä¹…åŒ–æ•°æ®
â”‚   â”œâ”€â”€ features/         # æå–çš„éŸ³é¢‘ç‰¹å¾ (.npy)
â”‚   â”œâ”€â”€ players/          # åŠ å¯†çš„ç”¨æˆ·æ­¦å™¨åº“ (.dat)
â”‚   â”œâ”€â”€ Arms.xlsx         # åˆå§‹æ­¦å™¨æ•°æ®
â”‚   â””â”€â”€ users.dat         # åŠ å¯†çš„ç”¨æˆ·æ•°æ®
â”œâ”€â”€ original/             # åŸå§‹æ–‡æ¡£ä¸èµ„æ–™
â”œâ”€â”€ reports/              # è¯„ä¼°æŠ¥å‘Šä¸å›¾è¡¨
â”‚   â””â”€â”€ figures/          # å¯è§†åŒ–å›¾è¡¨
â”œâ”€â”€ sounds/               # åŸå§‹éŸ³é¢‘æ•°æ® (éœ€è¦ç”¨æˆ·è‡ªè¡Œå‡†å¤‡)
â”œâ”€â”€ src/                  # å£°éŸ³è¯†åˆ«ç³»ç»Ÿæ ¸å¿ƒä»£ç 
â”‚   â””â”€â”€ sound_recognition/
â”‚       â”œâ”€â”€ config.py             # é…ç½®æ–‡ä»¶
â”‚       â”œâ”€â”€ dataset.py            # æ•°æ®åŠ è½½ä¸æ ‡ç­¾è§£æ
â”‚       â”œâ”€â”€ feature_extractor.py  # ç‰¹å¾æå–å™¨
â”‚       â”œâ”€â”€ train.py              # ä¼ ç»Ÿæ¨¡å‹è®­ç»ƒå™¨
â”‚       â”œâ”€â”€ train_ast.py          # AST æ¨¡å‹è®­ç»ƒå™¨
â”‚       â”œâ”€â”€ train_passt.py        # PaSST æ¨¡å‹è®­ç»ƒå™¨
â”‚       â”œâ”€â”€ evaluate.py           # ç»¼åˆè¯„ä¼°å™¨
â”‚       â””â”€â”€ visualize_results.py  # ç»“æœå¯è§†åŒ–è„šæœ¬
â”œâ”€â”€ all_train_and_eval.sh # æ‰¹é‡è®­ç»ƒä¸è¯„ä¼°è„šæœ¬
â”œâ”€â”€ models.py             # æ•°æ®æ¨¡å‹ (Weapon, Player)
â”œâ”€â”€ run.py                # Webåº”ç”¨å¯åŠ¨å…¥å£
â””â”€â”€ secret.key            # AES åŠ å¯†å¯†é’¥